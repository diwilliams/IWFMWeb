<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Grid Template for Bootstrap</title>

	 <!--<link rel="stylesheet" href="http://js.arcgis.com/3.9/js/dojo/dijit/themes/claro/claro.css">
    <link rel="stylesheet" href="http://js.arcgis.com/3.9/js/dojo/dojox/grid/resources/Grid.css">
    <link rel="stylesheet" href="http://js.arcgis.com/3.9/js/dojo/dojox/grid/resources/claroGrid.css">-->

    <!-- Need this for tab container-->
    <!--<link rel="stylesheet" href="http://js.arcgis.com/3.9/js/dojo/dijit/themes/tundra/tundra.css">
    <link rel="stylesheet" href="http://js.arcgis.com/3.9/js/esri/css/esri.css">
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css"> -->
	
     

	<link rel="stylesheet" href="https://js.arcgis.com/3.16/esri/themes/calcite/dijit/calcite.css">
	<link rel="stylesheet" href="https://js.arcgis.com/3.16/esri/themes/calcite/esri/esri.css">
	
  <!-- 	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"> -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/yeti/bootstrap.min.css">
   <!--  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	
      <script src="http://code.highcharts.com/stock/highstock.js"></script>
      <script src="http://code.highcharts.com/modules/exporting.js"></script>


      <script src="./js/functions.js"></script>
	
    <!-- Bootstrap core CSS -->
    <!--<link href="../../dist/css/bootstrap.min.css" rel="stylesheet">-->

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="grid.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="../../assets/js/ie-emulation-modes-warning.js"></script>
    
	<link rel="stylesheet" href="https://js.arcgis.com/3.16/esri/css/esri.css">
    
    <script src="https://js.arcgis.com/3.16/"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <style>

      .hidden{

        display:none;
      }


  .row-eq-height {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
}
.dropdown-menu{
  min-width:360px;
}
.marginButton {
    margin-top: 0px;
    margin-right: 10px;
    margin-bottom: 0px;
    margin-left: 10px;
}
.makeWhite{
background-color: white; 
border:none;
}

      #layerListPane {
          width: 25%;
      }

      .esriLayer {
          background-color: #fff;
      }

      .esriLayerList .esriList {
          border-top: none;
      }

      .esriLayerList .esriTitle {
          background-color: #fff;
          border-bottom: none;
      }

      .esriLayerList .esriList ul {
          background-color: #fff;
      }
      /* Dijit overrides */
      .calcite .esriBasemapGalleryNode {
          height: 120px;
      }
.esriLabel{
    text-align:left;

}

     /* .bottomit {
          position: absolute;
          bottom: 0;
          right: 0;
          margin-top: 20px;
          margin-bottom: 0px;
      }*/
      .navbar{
          margin-top: 50px !important;
          margin-bottom: 0;
        
      }

      .nav-pills{
          margin-top: 60px !important;
          margin-bottom: 0;
        
      }

      .row {
          margin-top: 0px;
          margin-bottom: 5px;
      }
      /*.navbar .brand, .navbar .nav > li > a {
          color: #ffffff;
      }

          .navbar .brand, .navbar .nav > li > a:hover {
              color: #F56E6E;
          }
*/
/* From Diane*/
      /*.navbar-inverse {

          background-image: linear-gradient(to bottom,#0079c1 0,rgb(36, 75, 150) 10);
      }*/
     /* .navbar-inverse {
          background-image: linear-gradient(to bottom,#0079c1 0, #0079c1 100%);
      }*/
      /*Make hove on nav buttons yellow*/
   /*   .navbar .brand, .navbar .nav > li > a:hover { 
          color: #F5EC6E;
      }*/
  </style>
<script>


    //Globals
    var map;
    var theServer = "54.215.12.164";
    
    var Globals = {};
    Globals.MapServerPath = "http://" + theServer + "/arcgis/rest/services/IWFM/IWFMWeb_C2VSim/MapServer/"
   //Globals.SelectedDataType = "";
    Globals.FeatureType = "";
    Globals.SelectedID = "";



    //These are for the dropdowns
    Globals.FeatureType = "";
    Globals.DataType = "";
    Globals.SubDataType = "";

    Globals.ArrayOfSelectedIDs = [];

    Globals.DataTypeArray;
    var optionsMainChart;
    var chartMain;
    var GlobalPass = {};
    var ColorSeries = {};
    require(["esri/map", "esri/arcgis/utils", "esri/dijit/LayerList", "esri/dijit/BasemapGallery", "dojo/domReady!"], function (Map, arcgisUtils, LayerList, BasemapGallery) {

        Globals.LayerList = LayerList;
 
  map = new Map("mapDiv", {
    center: [-121, 37.8],
    zoom: 6,
    basemap: "topo"
    
  });

  map.on("click", function (event) { mapClick(event); }); //for drawing

  

  $("#idTypeSelector li a").click(function () {
      
      switch ($(this).text()) {

          case "Subregions":
          case "Elements": 
          case "Nodes":
          case "Stream Nodes": 
          case "Stream Reaches":
          case "Production Wells":
          case "Calibration Wells": 
          case "Small Watersheds":
         
               //Globals.SelectedDataType = $(this).text();
               Globals.FeatureType = $(this).text();
               $("#idDataTypeDropdown").children().remove();  //Clear out matters
              PopulateDataTypeControl(Globals.FeatureType);

              break;
          case "Clear Selection":
             
              map.graphics.clear()
              Globals.ArrayOfSelectedIDs = [];
              break;
          default:
              alert("No match in idTypeSelector");
              break;
      }




      //Globals.SelectedDataType = $(this).text();
      //alert("Victory");
      //$(this).parents(".dropdown").find('.btn').html($(this).text() + ' <span class="caret"></span>');
      //$(this).parents(".dropdown").find('.btn').val($(this).data('value'));
  });


 
  //$("#idApplication li a").click(function () {
  //    alert($(this).text());
  //    //$(this).parents(".dropdown").find('.btn').html($(this).text() + ' <span class="caret"></span>');
  //    //$(this).parents(".dropdown").find('.btn').val($(this).data('value'));
  //});
  

  //currentMap = map;
  //parser.parse();
  var basemapGallery = new BasemapGallery({
      showArcGISBasemaps: true,
      map: map
  }, "basemapGallery");
  basemapGallery.startup();
  basemapGallery.on("error", function (msg) {
      alert(msg);
      console.log("basemap gallery error:  ", msg);
  });

  
  //currentMap = map;
        // dynamicMainLayer = new esri.layers.ArcGISDynamicMapServiceLayer("http://" + theServer + "/arcgis/rest/services/IWFM/IWFM_wmas/MapServer/", {
  dynamicMainLayer = new esri.layers.ArcGISDynamicMapServiceLayer(Globals.MapServerPath, {
      "id": "IWFM Model",
      "showAttribution": false
  });

    

  //var layerDefs = [];
  //layerDefs[6] = "Moonshed = 'No Name'";
 // dynamicMainLayer.setLayerDefinitions(layerDefs);
  //dynamicMainLayer.setVisibleLayers([1, 2, 3, 4, 5, 6, 7, 9]);
    //dynamicLayer.setOpacity(.35);
  map.addLayer(dynamicMainLayer);

  //var layerList = new LayerList({
  //    map: map,
  //    showLegend: true,
  //    showSubLayers: true,
  //    showOpacitySlider: true,
  //    layers: [dynamicMainLayer]
  //},"layerList");
  //layerList.startup();

  //var myWidget = new LayerList({
  //    map: map,
  //    layers: [{
  //        layer: dynamicMainLayer,
  //        id: "testLayer",
  //        button: "helpButton",
  //        content: "horizontalSlider",
  //        subLayers: true
  //    }],
  //    //layer: atlasLayer
  //}, "layerList");

  //myWidget.startup();


  myWidget = new LayerList({
      map: map,
      showSubLayers: true,
      showLegend: true,
      showOpacitySlider: true,
      layers: map._layers
  }, "idDivLegend");
  myWidget.startup();


  // Set up colors
  ColorSeries[0] = '#CC66CC';
  ColorSeries[1] = '#0080FF';
  ColorSeries[2] = '#FF1900';
  ColorSeries[3] = '#00FF26';
  ColorSeries[4] = '#FFD900';
  ColorSeries[5] = '#F700FF';
  ColorSeries[6] = '#000000';
  GlobalPass.ColorSeries = ColorSeries;

 //Scroll function
$.fn.scrollView = function () {
  //alert("in scrollView");
  return this.each(function () {
    $('html, body').animate({
      scrollTop: $(this).offset().top
    }, 1000);
  });
}

//Click event on Retrieve Data button scrolls to chart
$('#idRetrieveData').click(function (event) {
  //alert("in scroll link");
  event.preventDefault();
  //$('#header').scrollView();
  //$('#nav-header').scrollView();
  $('#container').scrollView(1000);
});





  // Initialize Chart
 
  optionsMainChart = {

      chart: {
          renderTo: 'container',
          zoomType: 'x', // can do xy
          height: 500,
          type: 'spline'

      },
      tooltip: {
         
          crosshairs: [true, false],
          formatter: function () {
              return '<b>' + GlobalPass.Name + '</b><br/>' + Highcharts.numberFormat(this.y,2) + '<br/>' +
                  Highcharts.dateFormat('%b-%e-%Y', 
                                        new Date(this.x));
          }


      },
      title: {
          text: '',
          align: 'left',
          x: 90,
          y: 30,
          floating: true
      },
      xAxis: {
          type: 'datetime',
          ordinal: false
          //minTickInterval: 24 * 3600 * 1000 * 28
          //min: 0
      },
      yAxis: {
          title: false

      },
      series: []

  };


 
        // Create the new chart passing it the options
  chartMain = new Highcharts.Chart(optionsMainChart);
 
  $("#tom").click(function () {
      $.ajax({
          url: "Tom.html",
          dataType: "html",
          success: function(data) {
              $("#content").fadeOut(function() {
                  $(this).html(data).slideDown();
              });
          }
      });

     

  });

});
 

</script>
 <body class="calcite">
   <div class="container-fluid">
      <div class="row">
         <div class="col-md-1  makeWhite text-center">
            <img src="dwr2.png" class="img-responsive">
         </div>
         <div class="col-md-2 makeWhite">
            <h1>IWFM C2VSim</h1>
         </div>
         <div class="col-md-3 makeWhite">
         </div>
         <div class="col-md-2 makeWhite">
            <nav role="navigation" class="navbar navbar-inverse">
               <!-- Brand and toggle get grouped for better mobile display -->
               <!-- <div class="navbar-header">
                  <button type="button" data-target="#navbarCollapse" data-toggle="collapse" class="navbar-toggle">
                      <span class="sr-only">Toggle navigation</span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                  </button>
                  
                  </div> -->
               <!-- Collection of nav links, forms, and other content for toggling -->
               <div id="navbarCollapse" class="collapse navbar-collapse">
                  <ul class="nav navbar-nav">
                     <li class="dropdown">
                        <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                           <h4>Base Maps<b class="caret"></h4></b>
                        </a>
                        <ul role="menu" class="dropdown-menu">
                           <li>
                              <div id="basemapGallery"></div>
                           </li>
                        </ul>
                     </li>
                     <li id="idTypeSelector" class="dropdown">
                        <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                           <h4>Select<b class="caret"></b></h4>
                        </a>
                        <ul role="menu" class="dropdown-menu">
                           <li><a href="#" id="idSubregionsType">Subregions</a></li>
                           <li><a href="#" id="idElementsType">Elements</a></li>
                           <li><a href="#" id="idNodesType">Nodes</a></li>
                           <li><a href="#" id="idStreamNodesType">Stream Nodes</a></li>
                           <li><a href="#" id="idStreamReachesType">Stream Reaches</a></li>
                           <li><a href="#" id="idProductionWellsType">Production Wells</a></li>
                           <li><a href="#" id="idCalibrationWellsType">Calibration Wells</a></li>
                           <li><a href="#" id="idSmallWatershedsType">Small Watersheds</a></li>
                           <li class="nav-divider"></li>
                           <li><a href="#" id="idClearSelection">Clear Selection</a></li>
                        </ul>
                     </li>
                     <!--  <li id="idApplication" class="dropdown">
                        <a data-toggle="dropdown" class="dropdown-toggle" href="#"><h4>Applications<b class="caret"></b></h4></a>
                        <ul role="menu" class="dropdown-menu">
                            <li><a href="#" class="aaf" id="idLegend">Legend</a></li>
                            <li><a href="#" class="aaf" id="idTimeSeries">Timeseries</a></li>
                            <li><a href="#" class="aaf" id="idAverages">Averages</a></li>
                            <li><a href="#" class="aaf" id="idGroundWaterLevels">Groundwater Levels</a></li> -->
                        <!-- </ul>
                        </li>-->
                  </ul>
                  <!--<form role="search" class="navbar-form navbar-left">
                     <div class="form-group">
                         <input type="text" placeholder="Search" class="form-control">
                     </div>
                     </form>
                     <ul class="nav navbar-nav navbar-right">
                     <li><a href="#">Login</a></li>
                     </ul>-->
               </div><!-- <div id="navbarCollapse" class="collapse navbar-collapse"> -->
            </nav>
         </div><!-- <div class="col-md-2 makeWhite  bottomit "> -->

         <div class="col-md-2 makeWhite text-center">
            <label id='idSelectResults'></label>
         </div>
        
        <div class="centered-pills">
         <ul class="nav nav-pills">
            <li role="presentation" class="active"><a href="#" class="aaf" id="idLegend">Legend</a></li>
            <li role="presentation"><a href="#" class="aaf" id="idTimeSeries">Timeseries</a></li>
            <li role="presentation"><a href="#">Statistics</a></li>
            <li role="presentation"><a href="#">Groundwater Levels</a></li>
         </ul>
         </div>
        
      </div><!-- <div class="row " > -->
      <!-- <div> 
         </div> -->
      <div id="content" class="row">
         <div id="mapDiv" class="col-md-8" style="height: 600px"></div>
         <div class="col-md-4 makeWhite">
            <!--<div class="row">
               </div>-->
            <!--<div class="row">-->
            <!--<button type="button" class="btn btn-primary marginButton" onclick="GetRestData();">RestData</button>
               <button type="button" class="btn btn-primary marginButton" onclick="GetDataTypeInfo()">DateTypes</button>
               <button type="button" class="btn btn-primary marginButton">Download</button>
               <button type="button" class="btn btn-primary marginButton">Download</button>-->
            <!--<nav class="navbar navbar-inverse">
               <div class="container-fluid">
                   <div class="navbar-header">
                       <a class="navbar-brand" href="#">IWFM   </a>
                   </div>
                   <ul class="nav navbar-nav">
                       <li class="active"><a href="#" id="idHome">Home</a></li>
                       <li><a href="#" class="aaf" id="idLegend">Legend</a></li>
                       <li><a href="#" class="aaf" id="idTimeseries">Timeseries</a></li>
                       <li><a href="#" class="aaf" id="idOther">Other</a></li>
                       <li><a href="#" class="aaf" id="idTest">Test</a></li>
                   </ul>
               </div>
               </nav>-->
            <!--</div>-->
            <!--<div class="row makeWhite">
               <div class="col-md-6 makeWhite">-->
            <div class="container-sm">
               <!-- <h2>Selection Panel</h2> -->
               <div class="panel panel-primary">
                  <div class="panel-heading">
                     <h4>Model Data</h4>
                  </div><!--<div class="panel-body">Panel Content</div> -->
                  <div class="panel-body">
                     <div id="contentArea">
                        <div id="idDivLegend" class="hidden"></div>
                        <div id="idDivTimeseries" class="dropdown">
                           <div class="row">
                              <div class="col-sm-6 col makeWhite">
                                 <h4 class="text-left">Data Type</h4>
                                 <div class="btn-group">
                                    <button class="btn btn-primary dropdown-toggle text-left" type="button" id="menu2" data-toggle="dropdown">
                                    Select
                                    <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu" role="menu"  id="idDataTypeDropdown">
                                    </ul>
                                 </div>
                              </div><!--<div class="col-sm-3">-->
                           </div><!--<div class="row">-->
                           <div class="row">
                              <div class="col-sm-6 makeWhite">
                                 <h4 class="text-left">Subdata Type</h4>
                                 <div class="btn-group">
                                    <button class="btn btn-primary dropdown-toggle text-left disabled" type="button" id="menu3" data-toggle="dropdown">
                                    Select
                                    <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu" role="menu" id="idSubDataTypeDropdown">
                                    </ul>
                                 </div>
                              </div><!--<div class="col-sm-3">-->
                           </div><!--<div class="row">-->
                           <div class="row">
                              <!--  <div class="col-sm-10 makeWhite"> -->
                              <div class="panel-footer text-center">
                                 <button class="btn btn-primary text-center" type="button" id="idRetrieveData">
                                 Retrieve Data
                                 </button>
                              </div>
                           </div>
                        </div><!-- <div id="idDivTimeseries" class="dropdown"> -->
                     </div><!--<div id="contentArea">-->
                  </div><!--div class="panel-body"-->
               </div><!-- <div class="panel panel-primary"> -->
            </div><!-- <div class="container-sm">-->
         </div><!-- <div class="col-md-4 makeWhite"> -->
      </div><!-- <div id="content" class="row"> -->
      <div class="row">
         <div id="container"></div>
      </div>
      <div class="row">
         <div id="info"></div>
      </div>
   </div><!--<div class="container-fluid">-->
   <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
   <!--<script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>-->
</body>
</html>
